# Spring Cloud Stream Fraud Applications

Custom https://cloud.spring.io/spring-cloud-stream-app-starters/[Spring Cloud App Starter] that customizes the https://docs.spring.io/spring-cloud-stream-app-starters/docs/Einstein.SR3/reference/htmlsingle/#spring-cloud-stream-modules-tensorflow-processor[TensorFlow Processor] to allow using a pre-trained Tensorflow model created with by the https://www.kaggle.com/currie32/predicting-fraud-with-tensorflow[Credit Card Fraud Detection Tensorflow] solution.

A pre-trained model is bundled with this project at https://github.com/tzolov/cdc-fraud-detection-demo/blob/master/fraud-detection-app-starters/spring-cloud-starter-stream-processor-fraud-detection/src/main/resources/fraud_detection_graph.pb[fraud_detection_graph.pb].

Use the following python script to (re)train and export the model yourself: file://./spring-cloud-starter-stream-processor-fraud-detection/model/train-model.py[train-model.py] . Later is direct copy of the original Kaggle solution (above) extended with following lines to allow exporting the final model as Protobuf `fraud_detection_graph.pb` file.


The Fraud Detection Processor expects input json messages in the following format:

```
{
 "time":403,
 "v1":1.13154130503628,
 "v2":-0.174361326933011,
 ... ,
 "v28":0.034254726765817,
 "amount":52.4
 }
```

The format strictly matches the column names that types of the original dataset https://www.kaggle.com/mlg-ulb/creditcardfraud

Only the `Class` column is intentionally removed as we don't know in advance if the input transaction is fraud or not.
 Instead it is processor's responsibility to decide by evaluating the input transaction through the pre-trained Tensorflow model.

The out put result is a single json message, that can be either: `{ "detection":"FRAUD" }` or `{ "detection":"NORMAL" }`


---

### fraud-detection processor
*Description*: TODO

include::spring-cloud-starter-stream-processor-fraud-detection/README.adoc[]

---

